[gd_scene format=3 uid="uid://bfml67xti40y0"]

[ext_resource type="Texture2D" uid="uid://dultr1g56loyw" path="res://assets/images/player.png" id="1_3vyb7"]
[ext_resource type="Script" uid="uid://cccvl8jupn5qs" path="res://scenes/actors/player.gd" id="1_g2els"]
[ext_resource type="Texture2D" uid="uid://bmaipib8dmfy" path="res://assets/images/dust.png" id="3_8y416"]
[ext_resource type="Script" uid="uid://drpttt3optl3r" path="res://scenes/components/state_machine/state_machine.gd" id="3_ktjr4"]
[ext_resource type="Texture2D" uid="uid://cgje6abrtp3g8" path="res://assets/images/speed_line.png" id="4_0w4p8"]
[ext_resource type="Script" uid="uid://tjtxruw00jmt" path="res://scenes/actors/state_walking.gd" id="4_7wueq"]
[ext_resource type="Script" uid="uid://d0cchv25mg772" path="res://scenes/actors/state_rolling.gd" id="5_oomub"]
[ext_resource type="Script" uid="uid://c8tknylpntdw3" path="res://scenes/actors/state_idle.gd" id="5_xx81n"]
[ext_resource type="Script" uid="uid://1r1kfnpc6d0y" path="res://scenes/actors/state_inhaling.gd" id="9_0w4p8"]

[sub_resource type="CircleShape2D" id="CircleShape2D_g2els"]
radius = 8.0

[sub_resource type="Curve" id="Curve_xx81n"]
_data = [Vector2(0, 1), 0.0, -0.82866544, 0, 0, Vector2(1, 0), -0.88153005, 0.0, 0, 0]
point_count = 2

[sub_resource type="Gradient" id="Gradient_7860b"]
colors = PackedColorArray(0.62160003, 0.6808, 0.74, 1, 1, 1, 1, 1)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_7860b"]
load_path = "res://.godot/imported/dust.png-ddaed6560f2b73f463b2f465ab954e35.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_wl55n"]
atlas = ExtResource("1_3vyb7")
region = Rect2(128, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nmlhc"]
atlas = ExtResource("1_3vyb7")
region = Rect2(192, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_h5w3c"]
atlas = ExtResource("1_3vyb7")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xx81n"]
atlas = ExtResource("1_3vyb7")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_0878f"]
atlas = ExtResource("1_3vyb7")
region = Rect2(128, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_dferu"]
atlas = ExtResource("1_3vyb7")
region = Rect2(160, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kggx2"]
atlas = ExtResource("1_3vyb7")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_c4rn8"]
atlas = ExtResource("1_3vyb7")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ypltb"]
atlas = ExtResource("1_3vyb7")
region = Rect2(128, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7860b"]
atlas = ExtResource("1_3vyb7")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_0w4p8"]
atlas = ExtResource("1_3vyb7")
region = Rect2(0, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_kggx2"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wl55n")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nmlhc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h5w3c")
}],
"loop": false,
"name": &"close_mouth",
"speed": 15.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xx81n")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0878f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dferu")
}],
"loop": true,
"name": &"inhaling",
"speed": 20.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kggx2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c4rn8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ypltb")
}],
"loop": false,
"name": &"open_mouth",
"speed": 15.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7860b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0w4p8")
}],
"loop": true,
"name": &"walk",
"speed": 15.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0w4p8"]
size = Vector2(1.5, 20)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_0w4p8"]
particles_animation = true
particles_anim_h_frames = 8
particles_anim_v_frames = 1
particles_anim_loop = false

[node name="Player" type="CharacterBody2D" unique_id=1160419393]
script = ExtResource("1_g2els")

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=1465140987]
shape = SubResource("CircleShape2D_g2els")

[node name="DustParticles" type="CPUParticles2D" parent="." unique_id=1495595345]
position = Vector2(0, 6)
emitting = false
amount = 15
texture = ExtResource("3_8y416")
lifetime = 0.4
emission_shape = 1
emission_sphere_radius = 6.2
gravity = Vector2(0, 0)
scale_amount_min = 0.5
scale_amount_curve = SubResource("Curve_xx81n")
color_initial_ramp = SubResource("Gradient_7860b")

[node name="WalkParticles" type="CPUParticles2D" parent="." unique_id=1642156299]
position = Vector2(0, 8)
emitting = false
amount = 4
texture = SubResource("CompressedTexture2D_7860b")
lifetime = 0.4
emission_shape = 3
emission_rect_extents = Vector2(2, 2)
gravity = Vector2(0, 0)
scale_amount_min = 0.2
scale_amount_max = 0.5
scale_amount_curve = SubResource("Curve_xx81n")
color_initial_ramp = SubResource("Gradient_7860b")

[node name="Sprite2D" type="AnimatedSprite2D" parent="." unique_id=1121651379]
position = Vector2(0, -3)
sprite_frames = SubResource("SpriteFrames_kggx2")
animation = &"inhaling"
frame_progress = 0.79196095
centered = false
offset = Vector2(-16, -18)

[node name="InhaleArea" type="Area2D" parent="." unique_id=1215968046]

[node name="CollisionShape2D" type="CollisionShape2D" parent="InhaleArea" unique_id=667900237]
shape = SubResource("RectangleShape2D_0w4p8")

[node name="InhaleDustParticles" type="CPUParticles2D" parent="InhaleArea" unique_id=587278326]
position = Vector2(1, 0)
amount = 10
texture = ExtResource("3_8y416")
lifetime = 0.35000000000000003
randomness = 0.19
emission_shape = 1
emission_sphere_radius = 20.0
spread = 0.0
gravity = Vector2(0, 0)
radial_accel_min = -200.0
radial_accel_max = -50.0
scale_amount_min = 0.05
scale_amount_max = 0.2
color_initial_ramp = SubResource("Gradient_7860b")

[node name="InhaleParticles" type="CPUParticles2D" parent="InhaleArea" unique_id=1286825424]
material = SubResource("CanvasItemMaterial_0w4p8")
position = Vector2(74, 0)
amount = 10
texture = ExtResource("4_0w4p8")
lifetime = 0.3
emission_shape = 3
emission_rect_extents = Vector2(10, 10)
particle_flag_align_y = true
direction = Vector2(-1, 0)
spread = 0.0
gravity = Vector2(0, 0)
initial_velocity_min = 256.0
initial_velocity_max = 256.0
color_initial_ramp = SubResource("Gradient_7860b")
anim_offset_max = 1.0

[node name="StateMachine" type="Node2D" parent="." unique_id=942379208 node_paths=PackedStringArray("entity")]
script = ExtResource("3_ktjr4")
default_state = "Idle"
entity = NodePath("..")
metadata/_custom_type_script = "uid://drpttt3optl3r"

[node name="Idle" type="Node2D" parent="StateMachine" unique_id=2042184740 node_paths=PackedStringArray("sprite")]
script = ExtResource("5_xx81n")
sprite = NodePath("../../Sprite2D")
metadata/_custom_type_script = "uid://bpqjpkhit0v31"

[node name="Walking" type="Node2D" parent="StateMachine" unique_id=504939297 node_paths=PackedStringArray("sprite", "walk_particles")]
script = ExtResource("4_7wueq")
sprite = NodePath("../../Sprite2D")
walk_particles = NodePath("../../WalkParticles")
metadata/_custom_type_script = "uid://bpqjpkhit0v31"

[node name="Rolling" type="Node2D" parent="StateMachine" unique_id=1706530067 node_paths=PackedStringArray("sprite", "dust_particles")]
script = ExtResource("5_oomub")
sprite = NodePath("../../Sprite2D")
dust_particles = NodePath("../../DustParticles")
metadata/_custom_type_script = "uid://bpqjpkhit0v31"

[node name="Inhaling" type="Node2D" parent="StateMachine" unique_id=183935234 node_paths=PackedStringArray("sprite", "inhale_area", "inhale_particles", "inhale_dust_particles")]
script = ExtResource("9_0w4p8")
sprite = NodePath("../../Sprite2D")
inhale_area = NodePath("../../InhaleArea")
inhale_particles = NodePath("../../InhaleArea/InhaleParticles")
inhale_dust_particles = NodePath("../../InhaleArea/InhaleDustParticles")
metadata/_custom_type_script = "uid://bpqjpkhit0v31"
